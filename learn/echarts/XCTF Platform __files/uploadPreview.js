var uploadPreview=function(a){var b=this;b.IsNull=function(a){return"function"!=typeof a&&(void 0==a||null==a||""==a||0==a.length)},b.DefautlSetting={UpBtn:"",DivShow:"",ImgShow:"",Width:100,Height:100,ImgType:["gif","jpeg","jpg","bmp","png"],ErrMsg:gettext("选择文件错误,图片类型必须是(gif,jpeg,jpg,bmp,png)中的一种"),callback:function(){}},b.Setting={UpBtn:b.IsNull(a.UpBtn)?b.DefautlSetting.UpBtn:a.UpBtn,DivShow:b.IsNull(a.DivShow)?b.DefautlSetting.DivShow:a.DivShow,ImgShow:b.IsNull(a.ImgShow)?b.DefautlSetting.ImgShow:a.ImgShow,Width:b.IsNull(a.Width)?b.DefautlSetting.Width:a.Width,Height:b.IsNull(a.Height)?b.DefautlSetting.Height:a.Height,ImgType:b.IsNull(a.ImgType)?b.DefautlSetting.ImgType:a.ImgType,ErrMsg:b.IsNull(a.ErrMsg)?b.DefautlSetting.ErrMsg:a.ErrMsg,callback:b.IsNull(a.callback)?b.DefautlSetting.callback:a.callback},b.getObjectURL=function(a){var b=null;return void 0!=window.createObjectURL?b=window.createObjectURL(a):void 0!=window.URL?b=window.URL.createObjectURL(a):void 0!=window.webkitURL&&(b=window.webkitURL.createObjectURL(a)),b},b.Bind=function(){document.getElementById(b.Setting.UpBtn).onchange=function(){if(this.value){if(!RegExp(".("+b.Setting.ImgType.join("|")+")$","i").test(this.value.toLowerCase()))return alert(b.Setting.ErrMsg),this.value="",!1;if(navigator.userAgent.indexOf("MSIE")>-1)try{document.getElementById(b.Setting.ImgShow).src=b.getObjectURL(this.files[0])}catch(a){var c=document.getElementById(b.Setting.DivShow);this.select(),top.parent.document.body.focus();var d=document.selection.createRange().text;document.selection.empty(),document.getElementById(b.Setting.ImgShow).style.display="none",c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",c.style.width=b.Setting.Width+"px",c.style.height=b.Setting.Height+"px",c.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=d}else document.getElementById(b.Setting.ImgShow).src=b.getObjectURL(this.files[0]);b.Setting.callback()}}},b.Bind()};